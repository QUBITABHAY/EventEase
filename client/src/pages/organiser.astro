---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Organiser Dashboard - EventEase">
    <div class="flex h-screen bg-gray-50 overflow-hidden">
        <aside
            id="sidebar"
            class="fixed inset-y-0 left-0 z-50 w-80 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 -translate-x-full shadow-lg"
        >
            <div
                class="flex items-center justify-between h-20 px-6 border-b border-gray-200 bg-gray-50"
            >
                <a
                    href="/"
                    class="text-2xl font-black text-blue-600 tracking-tight"
                    style="font-family: 'Space Grotesk', sans-serif;"
                >
                    EventEase
                </a>
                <button
                    id="closeSidebar"
                    class="lg:hidden text-gray-500 hover:text-gray-900 text-2xl font-bold"
                >
                    X
                </button>
            </div>

        <div class="flex items-center gap-4">
          <button class="btn btn-ghost btn-sm text-xl">
            Search
          </button>
          <div class="dropdown dropdown-end">
            <label tabindex="0" class="btn btn-ghost avatar placeholder">
              <div class="bg-purple-600 text-white w-10 h-10">
                <span class="text-sm">ORG</span>
              </div>
            </label>
            <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-50 p-2 shadow-lg bg-white w-52 border border-gray-100">
              <li><a href="#profile" data-page="profile">Profile Settings</a></li>
              <li><a href="/login">Logout</a></li>
            </ul>
          </div>
        </div>
      </header>

      <main class="flex-1 overflow-y-auto p-8 bg-gray-50">
        <!-- Dashboard Overview -->
        <div id="dashboard-page" class="page-content">
          <h1 class="text-4xl font-black text-gray-900 mb-8 tracking-tight" style="font-family: 'Poppins', sans-serif;">Dashboard Overview</h1>
          
          <!-- Stats Cards -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white p-6 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-gray-500 text-sm font-black uppercase tracking-wide">Total Events</p>
                  <p id="statTotalEvents" class="text-4xl font-black text-gray-900 mt-2" style="font-family: 'Poppins', sans-serif;">0</p>
                </div>
                <div class="bg-blue-100 p-3 border-2 border-black">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="square" stroke-linejoin="miter" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                </div>
              </div>
              <div class="mt-4 text-sm font-bold text-gray-400 uppercase tracking-wider">
                this month
              </div>
            </div>

            <div class="bg-white p-6 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-gray-500 text-sm font-black uppercase tracking-wide">Active Events</p>
                  <p id="statActiveEvents" class="text-4xl font-black text-gray-900 mt-2" style="font-family: 'Poppins', sans-serif;">0</p>
                </div>
                <div class="bg-green-100 p-3 border-2 border-black">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="square" stroke-linejoin="miter" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                </div>
              </div>
              <div class="mt-4 text-sm font-bold text-gray-400 uppercase tracking-wider">
                currently
              </div>
            </div>

            <div class="bg-white p-6 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-gray-500 text-sm font-black uppercase tracking-wide">Registrations</p>
                  <p id="statTotalRegistrations" class="text-4xl font-black text-gray-900 mt-2" style="font-family: 'Poppins', sans-serif;">0</p>
                </div>
                <div class="bg-purple-100 p-3 border-2 border-black">
                   <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="square" stroke-linejoin="miter" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                </div>
              </div>
              <div class="mt-4 text-sm font-bold text-gray-400 uppercase tracking-wider">
                this week
              </div>
            </div>

            <div class="bg-white p-6 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-gray-500 text-sm font-black uppercase tracking-wide">Avg Attendance</p>
                  <p id="statAvgAttendance" class="text-4xl font-black text-gray-900 mt-2" style="font-family: 'Poppins', sans-serif;">0%</p>
                </div>
                <div class="bg-orange-100 p-3 border-2 border-black">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="square" stroke-linejoin="miter" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                </div>
              </div>
              <div class="mt-4 text-sm font-bold text-gray-400 uppercase tracking-wider">
                from last month
              </div>
            </div>
          </div>

          <!-- Recent Events -->
          <div class="bg-white shadow-lg border border-gray-200 mb-8">
            <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
              <h2 class="text-2xl font-black text-gray-900" style="font-family: 'Poppins', sans-serif;">Recent Events</h2>
            </div>
            <div class="overflow-x-auto">
              <table class="table w-full">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="font-bold text-gray-700">Event Name</th>
                    <th class="font-bold text-gray-700">Date</th>
                    <th class="font-bold text-gray-700">Registrations</th>
                    <th class="font-bold text-gray-700">Status</th>
                    <th class="font-bold text-gray-700">Actions</th>
                  </tr>
                </thead>
                <tbody id="recentEventsTableBody">
                  <tr>
                    <td colspan="5" class="text-center py-8 text-gray-500 font-medium">No events yet</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <button class="bg-blue-600 text-white p-8 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all text-left group">
              <h3 class="text-2xl font-black mb-2 uppercase tracking-tight group-hover:underline decoration-4 underline-offset-4" style="font-family: 'Poppins', sans-serif;">Create New Event</h3>
              <p class="text-blue-100 font-bold tracking-wide">Start organizing a new event</p>
            </button>
            <button class="bg-purple-600 text-white p-8 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all text-left group">
              <h3 class="text-2xl font-black mb-2 uppercase tracking-tight group-hover:underline decoration-4 underline-offset-4" style="font-family: 'Poppins', sans-serif;">View Statistics</h3>
              <p class="text-purple-100 font-bold tracking-wide">Check detailed analytics</p>
            </button>
            <button class="bg-green-600 text-white p-8 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all text-left group">
              <h3 class="text-2xl font-black mb-2 uppercase tracking-tight group-hover:underline decoration-4 underline-offset-4" style="font-family: 'Poppins', sans-serif;">Manage Events</h3>
              <p class="text-green-100 font-bold tracking-wide">Edit and update events</p>
            </button>
          </div>
        </div>

       
        <div id="create-page" class="page-content hidden">
          <div class="fixed inset-0 bg-gradient-to-br from-purple-50 via-white to-blue-50 z-50 overflow-hidden">
            <div class="h-full flex flex-col">
              <!-- Progress Bar -->
              <div class="bg-white border-b border-gray-200 px-8 py-4">
                <div class="flex items-center justify-between mb-2">
                  <span class="text-sm font-bold text-gray-600" style="font-family: 'Poppins', sans-serif;">
                    Step <span id="currentStep">1</span> of <span id="totalSteps">12</span>
                  </span>
                  <button id="closeTypeform" class="text-gray-500 hover:text-gray-900 font-bold text-xl">X</button>
                </div>
                <div class="w-full bg-gray-200 h-2">
                  <div id="progressBar" class="bg-purple-600 h-2 transition-all duration-300" style="width: 8.33%"></div>
                </div>
              </div>

              <!-- Form Container -->
              <div class="flex-1 overflow-y-auto px-8 py-12">
                <form id="typeformCreate" class="max-w-3xl mx-auto">
                  
                  <!-- Question 1: Event Title -->
                  <div class="question-slide active" data-step="1">
                    <div class="mb-8">
                      <span class="text-purple-600 font-bold text-sm tracking-wide uppercase">Question 1</span>
                      <h2 class="text-5xl font-black text-gray-900 mt-4 mb-8" style="font-family: 'Poppins', sans-serif;">
                        What's the name of your event?
                      </h2>
                      <input 
                        type="text" 
                        id="eventTitle"
                        placeholder="Type your answer here..."
                        class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                        required
                      />
                      <p class="text-gray-500 text-sm mt-4 font-medium">Press Enter ↵</p>
                    </div>
                </div>
            </header>

            <main class="flex-1 overflow-y-auto p-8 bg-gray-50">
                <!-- Dashboard Overview -->
                <div id="dashboard-page" class="page-content">
                    <h1
                        class="text-4xl font-black text-gray-900 mb-8 tracking-tight"
                        style="font-family: 'Poppins', sans-serif;"
                    >
                        Dashboard Overview
                    </h1>

                    <!-- Stats Cards -->
                    <div
                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
                    >
                        <div
                            class="bg-white p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-shadow"
                        >
                            <div class="flex items-center justify-between">
                                <div>
                                    <p
                                        class="text-gray-500 text-sm font-semibold uppercase tracking-wide"
                                    >
                                        Total Events
                                    </p>
                                    <p
                                        class="text-4xl font-black text-gray-900 mt-2"
                                        style="font-family: 'Poppins', sans-serif;"
                                    >
                                        0
                                    </p>
                                </div>
                                <div class="bg-blue-100 p-4">
                                    <span
                                        class="text-3xl text-blue-600 font-bold"
                                        >E</span
                                    >
                                </div>
                            </div>
                            <div class="mt-4 text-sm">
                                <span class="text-gray-500"> this month</span>
                            </div>
                        </div>

                        <div
                            class="bg-white p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-shadow"
                        >
                            <div class="flex items-center justify-between">
                                <div>
                                    <p
                                        class="text-gray-500 text-sm font-semibold uppercase tracking-wide"
                                    >
                                        Active Events
                                    </p>
                                    <p
                                        class="text-4xl font-black text-gray-900 mt-2"
                                        style="font-family: 'Poppins', sans-serif;"
                                    >
                                        0
                                    </p>
                                </div>
                                <div class="bg-green-100 p-4">
                                    <span
                                        class="text-3xl text-green-600 font-bold"
                                        >A</span
                                    >
                                </div>
                            </div>
                            <div class="mt-4 text-sm">
                                <span class="text-gray-500"> currently</span>
                            </div>
                        </div>

                        <div
                            class="bg-white p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-shadow"
                        >
                            <div class="flex items-center justify-between">
                                <div>
                                    <p
                                        class="text-gray-500 text-sm font-semibold uppercase tracking-wide"
                                    >
                                        Total Registrations
                                    </p>
                                    <p
                                        class="text-4xl font-black text-gray-900 mt-2"
                                        style="font-family: 'Poppins', sans-serif;"
                                    >
                                        0
                                    </p>
                                </div>
                                <div class="bg-purple-100 p-4">
                                    <span
                                        class="text-3xl text-purple-600 font-bold"
                                        >R</span
                                    >
                                </div>
                            </div>
                            <div class="mt-4 text-sm">
                                <span class="text-gray-500"> this week</span>
                            </div>
                        </div>

                        <div
                            class="bg-white p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-shadow"
                        >
                            <div class="flex items-center justify-between">
                                <div>
                                    <p
                                        class="text-gray-500 text-sm font-semibold uppercase tracking-wide"
                                    >
                                        Avg Attendance
                                    </p>
                                    <p
                                        class="text-4xl font-black text-gray-900 mt-2"
                                        style="font-family: 'Poppins', sans-serif;"
                                    >
                                        0%
                                    </p>
                                </div>
                                <div class="bg-orange-100 p-4">
                                    <span
                                        class="text-3xl text-orange-600 font-bold"
                                        >%</span
                                    >
                                </div>
                            </div>
                            <div class="mt-4 text-sm">
                                <span class="text-gray-500">
                                    from last month</span
                                >
                            </div>
                        </div>
                    </div>
                  </div>

                  <!-- Question 3: Category -->
                  <div class="question-slide" data-step="3">
                    <div class="mb-8">
                      <span class="text-purple-600 font-bold text-sm tracking-wide uppercase">Question 3</span>
                      <h2 class="text-5xl font-black text-gray-900 mt-4 mb-8" style="font-family: 'Poppins', sans-serif;">
                        What category does it fall under?
                      </h2>
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button type="button" class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="Technology">
                          <div class="font-bold text-xl text-gray-900">Technology</div>
                        </button>
                        <button type="button" class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="Cultural">
                          <div class="font-bold text-xl text-gray-900">Cultural</div>
                        </button>
                        <button type="button" class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="Sports">
                          <div class="font-bold text-xl text-gray-900">Sports</div>
                        </button>
                        <button type="button" class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="Academic">
                          <div class="font-bold text-xl text-gray-900">Academic</div>
                        </button>
                        <button type="button" class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="Workshop">
                          <div class="font-bold text-xl text-gray-900">Workshop</div>
                        </button>
                        <button type="button" class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="Conference">
                          <div class="font-bold text-xl text-gray-900">Conference</div>
                        </button>
                      </div>
                      <input type="hidden" id="eventCategory" required />
                    </div>
                  </div>

                  <!-- Question 4: Event Type -->
                  <div class="question-slide" data-step="4">
                    <div class="mb-8">
                      <span class="text-purple-600 font-bold text-sm tracking-wide uppercase">Question 4</span>
                      <h2 class="text-5xl font-black text-gray-900 mt-4 mb-8" style="font-family: 'Poppins', sans-serif;">
                        How will attendees join?
                      </h2>
                      <div class="grid grid-cols-1 gap-4">
                        <button type="button" class="event-type-option p-8 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="In-Person">
                          <div>
                            <div class="font-bold text-2xl text-gray-900 mb-1">In-Person</div>
                            <div class="text-gray-600">Physical venue attendance</div>
                          </div>
                        </button>
                        <button type="button" class="event-type-option p-8 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="Online">
                          <div>
                            <div class="font-bold text-2xl text-gray-900 mb-1">Online</div>
                            <div class="text-gray-600">Virtual event via video call</div>
                          </div>
                        </button>
                        <button type="button" class="event-type-option p-8 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left rounded-none" data-value="Hybrid">
                          <div>
                            <div class="font-bold text-2xl text-gray-900 mb-1">Hybrid</div>
                            <div class="text-gray-600">Both in-person and online options</div>
                          </div>
                        </button>
                    </div>
                </div>

                <div id="create-page" class="page-content hidden">
                    <div
                        class="fixed inset-0 bg-gradient-to-br from-purple-50 via-white to-blue-50 z-50 overflow-hidden"
                    >
                        <div class="h-full flex flex-col">
                            <!-- Progress Bar -->
                            <div
                                class="bg-white border-b border-gray-200 px-8 py-4"
                            >
                                <div
                                    class="flex items-center justify-between mb-2"
                                >
                                    <span
                                        class="text-sm font-bold text-gray-600"
                                        style="font-family: 'Poppins', sans-serif;"
                                    >
                                        Step <span id="currentStep">1</span> of <span
                                            id="totalSteps">12</span
                                        >
                                    </span>
                                    <button
                                        id="closeTypeform"
                                        class="text-gray-500 hover:text-gray-900 font-bold text-xl"
                                        >X</button
                                    >
                                </div>
                                <div class="w-full bg-gray-200 h-2">
                                    <div
                                        id="progressBar"
                                        class="bg-purple-600 h-2 transition-all duration-300"
                                        style="width: 8.33%"
                                    >
                                    </div>
                                </div>
                            </div>

                            <!-- Form Container -->
                            <div class="flex-1 overflow-y-auto px-8 py-12">
                                <form
                                    id="typeformCreate"
                                    class="max-w-3xl mx-auto"
                                >
                                    <!-- Question 1: Event Title -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100 active"
                                        data-step="1"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 1</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                What's the name of your event?
                                            </h2>
                                            <input
                                                type="text"
                                                id="eventTitle"
                                                placeholder="Type your answer here..."
                                                class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                                required
                                            />
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 2: Event Description -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="2"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 2</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                Tell us about your event
                                            </h2>
                                            <textarea
                                                id="eventDescription"
                                                placeholder="Type your answer here..."
                                                class="w-full text-xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors resize-none h-32"
                                                required></textarea>
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 3: Category -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="3"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 3</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                What category does it fall
                                                under?
                                            </h2>
                                            <div
                                                class="grid grid-cols-1 md:grid-cols-2 gap-4"
                                            >
                                                <button
                                                    type="button"
                                                    class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="Technology"
                                                >
                                                    <div
                                                        class="font-bold text-xl text-gray-900"
                                                    >
                                                        Technology
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="Cultural"
                                                >
                                                    <div
                                                        class="font-bold text-xl text-gray-900"
                                                    >
                                                        Cultural
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="Sports"
                                                >
                                                    <div
                                                        class="font-bold text-xl text-gray-900"
                                                    >
                                                        Sports
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="Academic"
                                                >
                                                    <div
                                                        class="font-bold text-xl text-gray-900"
                                                    >
                                                        Academic
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="Workshop"
                                                >
                                                    <div
                                                        class="font-bold text-xl text-gray-900"
                                                    >
                                                        Workshop
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="category-option p-6 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="Conference"
                                                >
                                                    <div
                                                        class="font-bold text-xl text-gray-900"
                                                    >
                                                        Conference
                                                    </div>
                                                </button>
                                            </div>
                                            <input
                                                type="hidden"
                                                id="eventCategory"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <!-- Question 4: Event Type -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="4"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 4</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                How will attendees join?
                                            </h2>
                                            <div class="grid grid-cols-1 gap-4">
                                                <button
                                                    type="button"
                                                    class="event-type-option p-8 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="In-Person"
                                                >
                                                    <div>
                                                        <div
                                                            class="font-bold text-2xl text-gray-900 mb-1"
                                                        >
                                                            In-Person
                                                        </div>
                                                        <div
                                                            class="text-gray-600"
                                                        >
                                                            Physical venue
                                                            attendance
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="event-type-option p-8 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="Online"
                                                >
                                                    <div>
                                                        <div
                                                            class="font-bold text-2xl text-gray-900 mb-1"
                                                        >
                                                            Online
                                                        </div>
                                                        <div
                                                            class="text-gray-600"
                                                        >
                                                            Virtual event via
                                                            video call
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="event-type-option p-8 border-2 border-gray-300 hover:border-purple-600 hover:bg-purple-50 transition-all text-left [&.selected]:border-purple-600 [&.selected]:bg-purple-50 cursor-pointer"
                                                    data-value="Hybrid"
                                                >
                                                    <div>
                                                        <div
                                                            class="font-bold text-2xl text-gray-900 mb-1"
                                                        >
                                                            Hybrid
                                                        </div>
                                                        <div
                                                            class="text-gray-600"
                                                        >
                                                            Both in-person and
                                                            online options
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                            <input
                                                type="hidden"
                                                id="eventType"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <!-- Question 5: Start Date -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="5"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 5</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                When does it start?
                                            </h2>
                                            <input
                                                type="date"
                                                id="startDate"
                                                class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                                required
                                            />
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 6: Start Time -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="6"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 6</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                What time does it start?
                                            </h2>
                                            <input
                                                type="time"
                                                id="startTime"
                                                class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                                required
                                            />
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 7: End Date -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="7"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 7</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                When does it end?
                                            </h2>
                                            <input
                                                type="date"
                                                id="endDate"
                                                class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                                required
                                            />
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 8: End Time -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="8"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 8</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                What time does it end?
                                            </h2>
                                            <input
                                                type="time"
                                                id="endTime"
                                                class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                                required
                                            />
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 9: Venue -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="9"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 9</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                Where is the venue?
                                            </h2>
                                            <input
                                                type="text"
                                                id="venueName"
                                                placeholder="e.g., Main Auditorium, Grand Hall..."
                                                class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                                required
                                            />
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 10: Address -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="10"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 10</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                What's the full address?
                                            </h2>
                                            <input
                                                type="text"
                                                id="venueAddress"
                                                placeholder="Street address, city, state..."
                                                class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                            />
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵ or Skip
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 11: Max Attendees -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="11"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 11</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                How many people can attend?
                                            </h2>
                                            <input
                                                type="number"
                                                id="maxAttendees"
                                                placeholder="e.g., 100, 500..."
                                                class="w-full text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                            />
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter ↵ or Skip
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Question 12: Entry Fee -->
                                    <div
                                        class="question-slide hidden opacity-0 transition-opacity duration-300 ease-in [&.active]:block [&.active]:opacity-100"
                                        data-step="12"
                                    >
                                        <div class="mb-8">
                                            <span
                                                class="text-purple-600 font-bold text-sm tracking-wide uppercase"
                                                >Question 12</span
                                            >
                                            <h2
                                                class="text-5xl font-black text-gray-900 mt-4 mb-8"
                                                style="font-family: 'Poppins', sans-serif;"
                                            >
                                                Is there an entry fee?
                                            </h2>
                                            <div
                                                class="flex items-center gap-4 mb-6"
                                            >
                                                <span
                                                    class="text-3xl font-bold text-gray-700"
                                                    >$</span
                                                >
                                                <input
                                                    type="number"
                                                    id="entryFee"
                                                    placeholder="0.00"
                                                    step="0.01"
                                                    class="flex-1 text-2xl border-0 border-b-4 border-gray-300 focus:border-purple-600 outline-none py-4 bg-transparent font-medium transition-colors"
                                                />
                                            </div>
                                            <p
                                                class="text-gray-500 text-sm mt-4 font-medium"
                                            >
                                                Press Enter to finish
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Hidden inputs for multi-step form -->
                                    <input
                                        type="hidden"
                                        id="formStep"
                                        value="1"
                                    />
                                </form>
                            </div>

                            <!-- Navigation Buttons -->
                            <div
                                class="bg-white border-t border-gray-200 px-8 py-6"
                            >
                                <div
                                    class="max-w-3xl mx-auto flex justify-between items-center"
                                >
                                    <button
                                        type="button"
                                        id="prevButton"
                                        class="px-6 py-3 text-gray-600 hover:text-gray-900 font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                        disabled
                                    >
                                        Previous
                                    </button>
                                    <div class="flex gap-4">
                                        <button
                                            type="button"
                                            id="skipButton"
                                            class="px-6 py-3 text-gray-600 hover:text-gray-900 font-bold transition-colors"
                                        >
                                            Skip
                                        </button>
                                        <button
                                            type="button"
                                            id="nextButton"
                                            class="px-8 py-3 bg-purple-600 text-white hover:bg-purple-700 font-bold transition-colors"
                                        >
                                            Next
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Original Create Event Form (hidden fallback) -->
                <div id="create-traditional-page" class="page-content hidden">
                    <h1
                        class="text-4xl font-black text-gray-900 mb-8 tracking-tight"
                        style="font-family: 'Poppins', sans-serif;"
                    >
                        Create New Event
                    </h1>

                    <div class="bg-white shadow-lg border border-gray-200 p-8">
                        <form id="createEventForm" class="space-y-6">
                            <!-- Basic Information -->
                            <div class="border-b border-gray-200 pb-6">
                                <h2
                                    class="text-2xl font-black text-gray-900 mb-6"
                                    style="font-family: 'Poppins', sans-serif;"
                                >
                                    Basic Information
                                </h2>
                                <div
                                    class="grid grid-cols-1 md:grid-cols-2 gap-6"
                                >
                                    <div class="md:col-span-2">
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Event Title</label
                                        >
                                        <input
                                            type="text"
                                            placeholder="Enter event title"
                                            class="input input-bordered w-full"
                                            required
                                        />
                                    </div>
                                    <div class="md:col-span-2">
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Event Description</label
                                        >
                                        <textarea
                                            placeholder="Describe your event..."
                                            class="textarea textarea-bordered w-full h-32"
                                            required></textarea>
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Category</label
                                        >
                                        <select
                                            class="select select-bordered w-full"
                                            required
                                        >
                                            <option disabled selected
                                                >Select category</option
                                            >
                                            <option>Technology</option>
                                            <option>Cultural</option>
                                            <option>Sports</option>
                                            <option>Academic</option>
                                            <option>Workshop</option>
                                            <option>Conference</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Event Type</label
                                        >
                                        <select
                                            class="select select-bordered w-full"
                                            required
                                        >
                                            <option disabled selected
                                                >Select type</option
                                            >
                                            <option>In-Person</option>
                                            <option>Online</option>
                                            <option>Hybrid</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Date and Time -->
                            <div class="border-b border-gray-200 pb-6">
                                <h2
                                    class="text-2xl font-black text-gray-900 mb-6"
                                    style="font-family: 'Poppins', sans-serif;"
                                >
                                    Date & Time
                                </h2>
                                <div
                                    class="grid grid-cols-1 md:grid-cols-2 gap-6"
                                >
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Start Date</label
                                        >
                                        <input
                                            type="date"
                                            class="input input-bordered w-full"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Start Time</label
                                        >
                                        <input
                                            type="time"
                                            class="input input-bordered w-full"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >End Date</label
                                        >
                                        <input
                                            type="date"
                                            class="input input-bordered w-full"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >End Time</label
                                        >
                                        <input
                                            type="time"
                                            class="input input-bordered w-full"
                                            required
                                        />
                                    </div>
                                </div>
                            </div>

                            <!-- Location -->
                            <div class="border-b border-gray-200 pb-6">
                                <h2
                                    class="text-2xl font-black text-gray-900 mb-6"
                                    style="font-family: 'Poppins', sans-serif;"
                                >
                                    Location
                                </h2>
                                <div
                                    class="grid grid-cols-1 md:grid-cols-2 gap-6"
                                >
                                    <div class="md:col-span-2">
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Venue Name</label
                                        >
                                        <input
                                            type="text"
                                            placeholder="Enter venue name"
                                            class="input input-bordered w-full"
                                            required
                                        />
                                    </div>
                                    <div class="md:col-span-2">
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Address</label
                                        >
                                        <input
                                            type="text"
                                            placeholder="Enter full address"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >City</label
                                        >
                                        <input
                                            type="text"
                                            placeholder="Enter city"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Online Meeting Link</label
                                        >
                                        <input
                                            type="url"
                                            placeholder="https://..."
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                </div>
                            </div>

                            <!-- Registration Settings -->
                            <div class="border-b border-gray-200 pb-6">
                                <h2
                                    class="text-2xl font-black text-gray-900 mb-6"
                                    style="font-family: 'Poppins', sans-serif;"
                                >
                                    Registration Settings
                                </h2>
                                <div
                                    class="grid grid-cols-1 md:grid-cols-2 gap-6"
                                >
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Maximum Attendees</label
                                        >
                                        <input
                                            type="number"
                                            placeholder="Enter max capacity"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Registration Deadline</label
                                        >
                                        <input
                                            type="date"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Entry Fee</label
                                        >
                                        <input
                                            type="number"
                                            placeholder="0.00"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div class="flex items-center gap-4 pt-8">
                                        <label
                                            class="flex items-center gap-2 cursor-pointer"
                                        >
                                            <input
                                                type="checkbox"
                                                class="checkbox checkbox-primary"
                                            />
                                            <span
                                                class="text-sm font-bold text-gray-700"
                                                >Require Approval</span
                                            >
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Additional Details -->
                            <div class="pb-6">
                                <h2
                                    class="text-2xl font-black text-gray-900 mb-6"
                                    style="font-family: 'Poppins', sans-serif;"
                                >
                                    Additional Details
                                </h2>
                                <div class="grid grid-cols-1 gap-6">
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Event Banner URL</label
                                        >
                                        <input
                                            type="url"
                                            placeholder="https://..."
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Tags (comma separated)</label
                                        >
                                        <input
                                            type="text"
                                            placeholder="technology, workshop, ai"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Special Instructions</label
                                        >
                                        <textarea
                                            placeholder="Any special instructions for attendees..."
                                            class="textarea textarea-bordered w-full h-24"
                                        ></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex gap-4 pt-6">
                                <button
                                    type="submit"
                                    class="btn btn-primary flex-1 font-bold text-lg"
                                    >Create Event</button
                                >
                                <button
                                    type="button"
                                    class="btn btn-ghost border border-gray-300 px-8 font-bold"
                                    >Save as Draft</button
                                >
                                <button
                                    type="reset"
                                    class="btn btn-ghost border border-gray-300 px-8 font-bold"
                                    >Reset</button
                                >
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Manage Events Page -->
                <div id="manage-page" class="page-content hidden">
                    <h1
                        class="text-4xl font-black text-gray-900 mb-8 tracking-tight"
                        style="font-family: 'Poppins', sans-serif;"
                    >
                        Manage Events
                    </h1>

          <!-- Events List -->
          <div class="bg-white shadow-lg border border-gray-200">
            <div class="overflow-x-auto">
              <table class="table w-full">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="font-bold text-gray-700">Event Name</th>
                    <th class="font-bold text-gray-700">Date</th>
                    <th class="font-bold text-gray-700">Status</th>
                    <th class="font-bold text-gray-700">Actions</th>
                  </tr>
                </thead>
                <tbody id="manageEventsTableBody">
                   <tr><td colspan="4" class="text-center py-8">Loading...</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

                    <!-- Events List -->
                    <div
                        class="text-center py-16 bg-white shadow-lg border border-gray-200"
                    >
                        <p
                            class="text-gray-600 text-lg font-semibold"
                            style="font-family: 'Poppins', sans-serif;"
                        >
                            No events to manage yet
                        </p>
                    </div>
                </div>

                <!-- Statistics Page -->
                <div id="stats-page" class="page-content hidden">
                    <h1
                        class="text-4xl font-black text-gray-900 mb-8 tracking-tight"
                        style="font-family: 'Poppins', sans-serif;"
                    >
                        Event Statistics
                    </h1>

                    <!-- Overall Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div
                            class="bg-white p-6 shadow-lg border border-gray-200"
                        >
                            <h3
                                class="text-lg font-bold text-gray-500 mb-4 uppercase tracking-wide"
                            >
                                Events Overview
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Total Events</span
                                    >
                                    <span
                                        class="text-2xl font-black text-gray-900"
                                        >0</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Active Events</span
                                    >
                                    <span
                                        class="text-2xl font-black text-green-600"
                                        >0</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Completed</span
                                    >
                                    <span
                                        class="text-2xl font-black text-blue-600"
                                        >0</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Cancelled</span
                                    >
                                    <span
                                        class="text-2xl font-black text-red-600"
                                        >0</span
                                    >
                                </div>
                            </div>
                        </div>

                        <div
                            class="bg-white p-6 shadow-lg border border-gray-200"
                        >
                            <h3
                                class="text-lg font-bold text-gray-500 mb-4 uppercase tracking-wide"
                            >
                                Registration Stats
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Total Registrations</span
                                    >
                                    <span
                                        class="text-2xl font-black text-gray-900"
                                        >0</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >This Month</span
                                    >
                                    <span
                                        class="text-2xl font-black text-blue-600"
                                        >0</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >This Week</span
                                    >
                                    <span
                                        class="text-2xl font-black text-green-600"
                                        >0</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Today</span
                                    >
                                    <span
                                        class="text-2xl font-black text-purple-600"
                                        >0</span
                                    >
                                </div>
                            </div>
                        </div>

                        <div
                            class="bg-white p-6 shadow-lg border border-gray-200"
                        >
                            <h3
                                class="text-lg font-bold text-gray-500 mb-4 uppercase tracking-wide"
                            >
                                Attendance Stats
                            </h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Average Rate</span
                                    >
                                    <span
                                        class="text-2xl font-black text-gray-900"
                                        >0%</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Total Attended</span
                                    >
                                    <span
                                        class="text-2xl font-black text-green-600"
                                        >0</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >No Shows</span
                                    >
                                    <span
                                        class="text-2xl font-black text-red-600"
                                        >0</span
                                    >
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-semibold"
                                        >Feedback Score</span
                                    >
                                    <span
                                        class="text-2xl font-black text-yellow-600"
                                        >0</span
                                    >
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Category Breakdown -->
                    <div
                        class="bg-white shadow-lg border border-gray-200 p-6 mb-8"
                    >
                        <h2
                            class="text-2xl font-black text-gray-900 mb-6"
                            style="font-family: 'Poppins', sans-serif;"
                        >
                            Events by Category
                        </h2>
                        <div class="text-center py-8 text-gray-500 font-medium">
                            No category data available
                        </div>
                    </div>

                    <!-- Top Performing Events -->
                    <div class="bg-white shadow-lg border border-gray-200">
                        <div
                            class="px-6 py-4 border-b border-gray-200 bg-gray-50"
                        >
                            <h2
                                class="text-2xl font-black text-gray-900"
                                style="font-family: 'Poppins', sans-serif;"
                            >
                                Top Performing Events
                            </h2>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="table w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="font-bold text-gray-700"
                                            >Rank</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Event Name</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Registrations</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Attendance</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Rating</th
                                        >
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td
                                            colspan="5"
                                            class="text-center py-8 text-gray-500 font-medium"
                                            >No performance data available</td
                                        >
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Registrations Page -->
                <div id="registrations-page" class="page-content hidden">
                    <h1
                        class="text-4xl font-black text-gray-900 mb-8 tracking-tight"
                        style="font-family: 'Poppins', sans-serif;"
                    >
                        Event Registrations
                    </h1>

          <!-- Registrations List -->
          <div class="bg-white shadow-lg border border-gray-200">
            <div class="px-6 py-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center">
              <h2 class="text-2xl font-black text-gray-900" style="font-family: 'Poppins', sans-serif;">Recent Registrations</h2>
              <button class="btn btn-sm btn-primary font-bold">Export CSV</button>
            </div>
            <div class="overflow-x-auto">
              <table class="table w-full">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="font-bold text-gray-700">ID</th>
                    <th class="font-bold text-gray-700">Name</th>
                    <th class="font-bold text-gray-700">Email</th>
                    <th class="font-bold text-gray-700">Event</th>
                    <th class="font-bold text-gray-700">Date</th>
                    <th class="font-bold text-gray-700">Status</th>
                    <th class="font-bold text-gray-700">Actions</th>
                  </tr>
                </thead>
                <tbody id="registrationsTableBody">
                  <tr>
                    <td colspan="7" class="text-center py-8 text-gray-500 font-medium">No registrations yet</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-between items-center">
              <span class="text-sm text-gray-600 font-semibold">Showing 0 registrations</span>
              <div class="flex gap-2">
                <button class="btn btn-sm btn-ghost border border-gray-300 font-bold">Previous</button>
                <button class="btn btn-sm btn-ghost border border-gray-300 font-bold">Next</button>
              </div>
            </div>
          </div>
        </div>

                    <!-- Registrations List -->
                    <div class="bg-white shadow-lg border border-gray-200">
                        <div
                            class="px-6 py-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"
                        >
                            <h2
                                class="text-2xl font-black text-gray-900"
                                style="font-family: 'Poppins', sans-serif;"
                            >
                                Recent Registrations
                            </h2>
                            <button class="btn btn-sm btn-primary font-bold"
                                >Export CSV</button
                            >
                        </div>
                        <div class="overflow-x-auto">
                            <table class="table w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="font-bold text-gray-700"
                                            >ID</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Name</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Email</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Event</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Date</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Status</th
                                        >
                                        <th class="font-bold text-gray-700"
                                            >Actions</th
                                        >
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td
                                            colspan="7"
                                            class="text-center py-8 text-gray-500 font-medium"
                                            >No registrations yet</td
                                        >
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div
                            class="px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-between items-center"
                        >
                            <span class="text-sm text-gray-600 font-semibold"
                                >Showing 0 registrations</span
                            >
                            <div class="flex gap-2">
                                <button
                                    class="btn btn-sm btn-ghost border border-gray-300 font-bold"
                                    >Previous</button
                                >
                                <button
                                    class="btn btn-sm btn-ghost border border-gray-300 font-bold"
                                    >Next</button
                                >
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile Page -->
                <div id="profile-page" class="page-content hidden">
                    <h1
                        class="text-4xl font-black text-gray-900 mb-8 tracking-tight"
                        style="font-family: 'Poppins', sans-serif;"
                    >
                        Organiser Profile
                    </h1>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Profile Card -->
                        <div
                            class="bg-white shadow-lg border border-gray-200 p-6"
                        >
                            <div class="text-center">
                                <div class="avatar placeholder mx-auto mb-4">
                                    <div
                                        class="bg-purple-600 text-white w-24 h-24"
                                    >
                                        <span class="text-4xl font-bold"
                                            >ORG</span
                                        >
                                    </div>
                                </div>
                                <h2
                                    class="text-2xl font-black text-gray-900 mb-2"
                                    style="font-family: 'Poppins', sans-serif;"
                                >
                                    Tech Events Co.
                                </h2>
                                <p class="text-gray-600 font-semibold mb-4">
                                    Premium Organiser
                                </p>
                                <div class="space-y-2 text-left">
                                    <div class="flex items-center gap-2">
                                        <span class="font-bold text-gray-700"
                                            >Email:</span
                                        >
                                        <span class="text-gray-600"
                                            >contact@techevents.com</span
                                        >
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="font-bold text-gray-700"
                                            >Phone:</span
                                        >
                                        <span class="text-gray-600"
                                            >+1 234 567 8900</span
                                        >
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="font-bold text-gray-700"
                                            >Member Since:</span
                                        >
                                        <span class="text-gray-600"
                                            >Jan 2024</span
                                        >
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="font-bold text-gray-700"
                                            >Total Events:</span
                                        >
                                        <span class="text-blue-600 font-bold"
                                            >0</span
                                        >
                                    </div>
                                </div>
                                <button
                                    class="btn btn-primary w-full mt-6 font-bold"
                                    >Edit Profile</button
                                >
                            </div>
                        </div>

                        <!-- Profile Details -->
                        <div class="lg:col-span-2 space-y-6">
                            <div
                                class="bg-white shadow-lg border border-gray-200 p-6"
                            >
                                <h2
                                    class="text-2xl font-black text-gray-900 mb-6"
                                    style="font-family: 'Poppins', sans-serif;"
                                >
                                    Organization Information
                                </h2>
                                <form class="space-y-4">
                                    <div
                                        class="grid grid-cols-1 md:grid-cols-2 gap-4"
                                    >
                                        <div>
                                            <label
                                                class="block text-sm font-bold text-gray-700 mb-2"
                                                >Organization Name</label
                                            >
                                            <input
                                                type="text"
                                                value="Tech Events Co."
                                                class="input input-bordered w-full"
                                            />
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-bold text-gray-700 mb-2"
                                                >Contact Person</label
                                            >
                                            <input
                                                type="text"
                                                placeholder="Enter name"
                                                class="input input-bordered w-full"
                                            />
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-bold text-gray-700 mb-2"
                                                >Email Address</label
                                            >
                                            <input
                                                type="email"
                                                value="contact@techevents.com"
                                                class="input input-bordered w-full"
                                            />
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-bold text-gray-700 mb-2"
                                                >Phone Number</label
                                            >
                                            <input
                                                type="tel"
                                                value="+1 234 567 8900"
                                                class="input input-bordered w-full"
                                            />
                                        </div>
                                        <div class="md:col-span-2">
                                            <label
                                                class="block text-sm font-bold text-gray-700 mb-2"
                                                >Address</label
                                            >
                                            <input
                                                type="text"
                                                placeholder="Enter address"
                                                class="input input-bordered w-full"
                                            />
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-bold text-gray-700 mb-2"
                                                >City</label
                                            >
                                            <input
                                                type="text"
                                                placeholder="Enter city"
                                                class="input input-bordered w-full"
                                            />
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-bold text-gray-700 mb-2"
                                                >Website</label
                                            >
                                            <input
                                                type="url"
                                                placeholder="https://..."
                                                class="input input-bordered w-full"
                                            />
                                        </div>
                                        <div class="md:col-span-2">
                                            <label
                                                class="block text-sm font-bold text-gray-700 mb-2"
                                                >About Organization</label
                                            >
                                            <textarea
                                                placeholder="Tell us about your organization..."
                                                class="textarea textarea-bordered w-full h-24"
                                            ></textarea>
                                        </div>
                                    </div>
                                    <button
                                        type="submit"
                                        class="btn btn-primary font-bold"
                                        >Save Changes</button
                                    >
                                </form>
                            </div>

                            <div
                                class="bg-white shadow-lg border border-gray-200 p-6"
                            >
                                <h2
                                    class="text-2xl font-black text-gray-900 mb-6"
                                    style="font-family: 'Poppins', sans-serif;"
                                >
                                    Account Settings
                                </h2>
                                <div class="space-y-4">
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Current Password</label
                                        >
                                        <input
                                            type="password"
                                            placeholder="Enter current password"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >New Password</label
                                        >
                                        <input
                                            type="password"
                                            placeholder="Enter new password"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-bold text-gray-700 mb-2"
                                            >Confirm New Password</label
                                        >
                                        <input
                                            type="password"
                                            placeholder="Confirm new password"
                                            class="input input-bordered w-full"
                                        />
                                    </div>
                                    <button class="btn btn-primary font-bold"
                                        >Update Password</button
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <div
            id="sidebarOverlay"
            class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden hidden"
        >
        </div>
    </div>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // --- Navigation Logic ---
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const toggleSidebar = document.getElementById('toggleSidebar');
    const closeSidebar = document.getElementById('closeSidebar');
    const navLinks = document.querySelectorAll('.nav-link[data-page]');
    const pages = document.querySelectorAll('.page-content');
    const currentPageBreadcrumb = document.getElementById('currentPage');
    
    toggleSidebar?.addEventListener('click', () => {
      sidebar?.classList.remove('-translate-x-full');
      sidebarOverlay?.classList.remove('hidden');
    });
    
    closeSidebar?.addEventListener('click', () => {
      sidebar?.classList.add('-translate-x-full');
      sidebarOverlay?.classList.add('hidden');
    });
    
    sidebarOverlay?.addEventListener('click', () => {
      sidebar?.classList.add('-translate-x-full');
      sidebarOverlay?.classList.add('hidden');
    });
    
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        
        const pageId = (link as HTMLElement).dataset.page;
        pages.forEach(page => page.classList.add('hidden'));
        
        const targetPage = document.getElementById(`${pageId}-page`);
        if (targetPage) {
          targetPage.classList.remove('hidden');
          const pageTitle = link.textContent?.trim() || '';
          if (currentPageBreadcrumb) {
            currentPageBreadcrumb.textContent = pageTitle;
          }

          // Fetch data based on page
          if (pageId === 'dashboard') fetchStats();
          if (pageId === 'manage') fetchMyEvents();
          if (pageId === 'registrations') fetchRegistrations();
        }

        // Close sidebar on mobile
        if (window.innerWidth < 1024) {
          sidebar?.classList.add('-translate-x-full');
          sidebarOverlay?.classList.add('hidden');
        }
      });
    });

    // --- Data Fetching Logic ---

    async function fetchStats() {
        try {
            const res = await fetch('http://localhost:3000/api/events/organizer/stats', { credentials: 'include' });
            if (res.ok) {
                const { data } = await res.json();
                document.getElementById('statTotalEvents')!.textContent = data.totalEvents;
                document.getElementById('statActiveEvents')!.textContent = data.activeEvents;
                document.getElementById('statTotalRegistrations')!.textContent = data.totalRegistrations;
                document.getElementById('statAvgAttendance')!.textContent = data.avgAttendance || '0%';
            }
        } catch (e) {
            console.error("Failed to fetch stats", e);
        }
    }

    async function fetchMyEvents() {
        const tbody = document.getElementById('manageEventsTableBody');
        const recentTbody = document.getElementById('recentEventsTableBody');
        if (!tbody) return;

        try {
            const res = await fetch('http://localhost:3000/api/events/organizer/my-events', { credentials: 'include' });
            const { data } = await res.json();

            const renderRow = (event) => `
                <tr class="hover:bg-gray-50 transition-colors">
                    <td class="font-medium text-gray-900">${event.title}</td>
                    <td class="text-gray-600">${new Date(event.date).toLocaleDateString()}</td>
                    <td><span class="badge ${new Date(event.date) > new Date() ? 'badge-success' : 'badge-ghost'} badge-sm font-bold text-white">${new Date(event.date) > new Date() ? 'Active' : 'Completed'}</span></td>
                    <td>
                        <button class="btn btn-ghost btn-xs text-blue-600 hover:bg-blue-50" onclick="editEvent(${event.id})">Edit</button>
                        <button class="btn btn-ghost btn-xs text-red-600 hover:bg-red-50" onclick="deleteEvent(${event.id})">Delete</button>
                    </td>
                </tr>
            `;

            if (data.length === 0) {
                const empty = '<tr><td colspan="4" class="text-center py-8 text-gray-500">No events found</td></tr>';
                tbody.innerHTML = empty;
                if (recentTbody) recentTbody.innerHTML = empty;
                return;
            }

            tbody.innerHTML = data.map(renderRow).join('');
            
            // Also update Recent Events table (first 5)
            if (recentTbody) {
                // Recent events table has different columns: Name, Date, Registrations, Status, Actions
                // We'll simplify for now or fetch registrations count if needed.
                // For now, reusing similar structure but matching the header
                recentTbody.innerHTML = data.slice(0, 5).map(event => `
                    <tr>
                        <td class="font-bold text-gray-900">${event.title}</td>
                        <td class="text-gray-600">${new Date(event.date).toLocaleDateString()}</td>
                        <td class="text-gray-600 font-medium">-</td> 
                        <td><span class="badge ${new Date(event.date) > new Date() ? 'badge-success' : 'badge-ghost'} text-white font-bold">${new Date(event.date) > new Date() ? 'Active' : 'Completed'}</span></td>
                        <td><button class="btn btn-ghost btn-xs text-blue-600 font-bold">View</button></td>
                    </tr>
                `).join('');
            }

        } catch (e) {
            console.error(e);
            tbody.innerHTML = '<tr><td colspan="4" class="text-center text-red-500">Failed to load events</td></tr>';
        }
    }

    (window as any).deleteEvent = async (id) => {
        if (!confirm('Are you sure you want to delete this event?')) return;
        try {
            const res = await fetch(`http://localhost:3000/api/events/${id}`, {
                method: 'DELETE',
                credentials: 'include'
            });
            if (res.ok) {
                alert('Event deleted');
                fetchMyEvents();
                fetchStats();
            } else {
                alert('Failed to delete event');
            }
        } catch (e) {
            console.error(e);
        }
    };

    async function fetchRegistrations() {
        const tbody = document.getElementById('registrationsTableBody');
        if (!tbody) return;

        try {
            const res = await fetch('http://localhost:3000/api/events/organizer/registrations', { credentials: 'include' });
            const { data } = await res.json();

            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" class="text-center py-8 text-gray-500 font-medium">No registrations yet</td></tr>';
                return;
            }

            tbody.innerHTML = data.map(reg => `
                <tr class="hover:bg-gray-50 transition-colors">
                    <td class="font-mono text-xs text-gray-500">#${reg.id}</td>
                    <td class="font-bold text-gray-900">${reg.user.firstName} ${reg.user.lastName}</td>
                    <td class="text-gray-600">${reg.user.email}</td>
                    <td class="text-blue-600 font-medium">${reg.event.title}</td>
                    <td class="text-gray-600">${new Date(reg.createdAt).toLocaleDateString()}</td>
                    <td><span class="badge ${reg.paymentStatus === 'COMPLETED' ? 'badge-success' : 'badge-warning'} text-white font-bold badge-sm">${reg.paymentStatus}</span></td>
                    <td><button class="btn btn-ghost btn-xs">Details</button></td>
                </tr>
            `).join('');

        } catch (e) {
            console.error(e);
        }
    }


    // --- Typeform Logic ---
    let currentStep = 1;
    const totalSteps = 12;
    const slides = document.querySelectorAll('.question-slide');
    const progressBar = document.getElementById('progressBar');
    const currentStepEl = document.getElementById('currentStep');
    const prevButton = document.getElementById('prevButton');
    const nextButton = document.getElementById('nextButton');
    const skipButton = document.getElementById('skipButton');
    const closeTypeform = document.getElementById('closeTypeform');
    const typeformCreate = document.getElementById('typeformCreate');

    function updateProgress() {
      const progress = (currentStep / totalSteps) * 100;
      if (progressBar) progressBar.style.width = `${progress}%`;
      if (currentStepEl) currentStepEl.textContent = currentStep.toString();
      
      if (prevButton) (prevButton as HTMLButtonElement).disabled = currentStep === 1;
      if (nextButton) {
        nextButton.textContent = currentStep === totalSteps ? 'Submit' : 'Next';
      }

      const optionalSteps = [10, 11, 12];
      if (skipButton) {
        skipButton.style.display = optionalSteps.includes(currentStep) ? 'block' : 'none';
      }
    }

    function showSlide(step: number) {
      slides.forEach((slide, index) => {
        const htmlSlide = slide as HTMLElement;
        if (index + 1 === step) {
          htmlSlide.classList.add('active');
          htmlSlide.style.display = 'block';
          htmlSlide.style.opacity = '0';
          setTimeout(() => {
            htmlSlide.style.transition = 'opacity 0.3s ease-in';
            htmlSlide.style.opacity = '1';
          }, 10);
        } else {
          htmlSlide.classList.remove('active');
          htmlSlide.style.display = 'none';
        }
      });
      updateProgress();
      
      const activeSlide = document.querySelector('.question-slide.active');
      const input = activeSlide?.querySelector('input, textarea');
      if (input) (input as HTMLElement).focus();
    }

    function validateCurrentStep(): boolean {
      const activeSlide = document.querySelector('.question-slide.active');
      const input = activeSlide?.querySelector('input[required], textarea[required]');
      
      if (input) {
        const htmlInput = input as HTMLInputElement;
        if (!htmlInput.value.trim()) {
          htmlInput.classList.add('border-red-500');
          return false;
        }
        htmlInput.classList.remove('border-red-500');
      }
      return true;
    }

    function nextStep() {
      if (currentStep === totalSteps) {
        submitForm();
        return;
      }

      if (validateCurrentStep()) {
        currentStep++;
        showSlide(currentStep);
      }
    }

    function prevStep() {
      if (currentStep > 1) {
        currentStep--;
        showSlide(currentStep);
      }
    }

    function skipStep() {
      if (currentStep < totalSteps) {
        currentStep++;
        showSlide(currentStep);
      }
    }

    async function submitForm() {
      const formData = {
        title: (document.getElementById('eventTitle') as HTMLInputElement)?.value,
        description: (document.getElementById('eventDescription') as HTMLTextAreaElement)?.value,
        category: (document.getElementById('eventCategory') as HTMLInputElement)?.value,
        // type: (document.getElementById('eventType') as HTMLInputElement)?.value, // Backend doesn't have type yet, but we can send it or ignore
        date: (document.getElementById('startDate') as HTMLInputElement)?.value,
        startTime: (document.getElementById('startDate') as HTMLInputElement)?.value + 'T' + (document.getElementById('startTime') as HTMLInputElement)?.value, // Combine for ISO
        endTime: (document.getElementById('endDate') as HTMLInputElement)?.value + 'T' + (document.getElementById('endTime') as HTMLInputElement)?.value,
        venue: (document.getElementById('venueName') as HTMLInputElement)?.value,
        // address: (document.getElementById('venueAddress') as HTMLInputElement)?.value,
        capacity: (document.getElementById('maxAttendees') as HTMLInputElement)?.value,
        price: (document.getElementById('entryFee') as HTMLInputElement)?.value,
      };

      try {
          const res = await fetch('http://localhost:3000/api/events', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(formData),
              credentials: 'include'
          });
          
          if (res.ok) {
              alert('Event created successfully!');
              const createPage = document.getElementById('create-page');
              createPage?.classList.add('hidden');
              currentStep = 1;
              showSlide(1);
              fetchStats();
              fetchMyEvents();
              // Go to dashboard
              document.querySelector('.nav-link[data-page="dashboard"]')?.dispatchEvent(new Event('click'));
          } else {
              const err = await res.json();
              alert('Failed to create event: ' + err.message);
          }
      } catch (e) {
          console.error(e);
          alert('Error creating event');
      }
    }

    // Event Listeners
    nextButton?.addEventListener('click', nextStep);
    prevButton?.addEventListener('click', prevStep);
    skipButton?.addEventListener('click', skipStep);
    
    closeTypeform?.addEventListener('click', () => {
      const createPage = document.getElementById('create-page');
      createPage?.classList.add('hidden');
      currentStep = 1;
      showSlide(1);
    });

    typeformCreate?.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const target = e.target as HTMLElement;
        if (target.tagName !== 'TEXTAREA') {
            e.preventDefault();
            nextStep();
        }
      }
    });

    document.querySelectorAll('.category-option').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.category-option').forEach(b => {
          b.classList.remove('border-purple-600', 'bg-purple-50');
          b.classList.add('border-gray-300');
        });
        btn.classList.add('border-purple-600', 'bg-purple-50');
        btn.classList.remove('border-gray-300');
        const val = (btn as HTMLElement).dataset.value;
        (document.getElementById('eventCategory') as HTMLInputElement).value = val || '';
      });
    });

    document.querySelectorAll('.event-type-option').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.event-type-option').forEach(b => {
          b.classList.remove('border-purple-600', 'bg-purple-50');
          b.classList.add('border-gray-300');
        });
        btn.classList.add('border-purple-600', 'bg-purple-50');
        btn.classList.remove('border-gray-300');
        const val = (btn as HTMLElement).dataset.value;
        (document.getElementById('eventType') as HTMLInputElement).value = val || '';
      });
    });

    // Initial Load
    showSlide(1);
    fetchStats();
    fetchMyEvents(); // Pre-fetch
  });
</script>

<style>
  /* Remove all border radius */
  * {
    border-radius: 0 !important;
  }
  
  .btn, .card, .input, .select, .badge, .modal-box, .avatar, .dropdown-content {
    border-radius: 0 !important;
  }
  
  .nav-link {
    display: block;
    padding: 0.75rem 1rem;
    color: rgb(107, 114, 128);
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }
  
  .nav-link::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 3px;
    background: rgb(147, 51, 234);
    transform: scaleY(0);
    transition: transform 0.3s ease;
  }
  
  .nav-link:hover {
    color: rgb(31, 41, 55);
    background: rgb(243, 244, 246);
    transform: translateX(4px);
  }
  
  .nav-link.active {
    color: rgb(147, 51, 234);
    background: rgb(243, 232, 255);
    font-weight: 700;
  }
  
  .nav-link.active::before {
    transform: scaleY(1);
  }
  
  .page-content {
    animation: fadeIn 0.3s ease-in;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Typeform Styles */
  .question-slide {
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease-in;
  }

  .question-slide.active {
    display: block;
    opacity: 1;
  }

  .question-slide input:focus,
  .question-slide textarea:focus {
    border-bottom-color: rgb(147, 51, 234);
  }

  .category-option,
  .event-type-option {
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .category-option.selected,
  .event-type-option.selected {
    border-color: rgb(147, 51, 234);
    background-color: rgb(243, 232, 255);
  }

  /* Custom scrollbar for typeform */
  #create-page::-webkit-scrollbar {
    width: 8px;
  }

  #create-page::-webkit-scrollbar-track {
    background: rgb(243, 244, 246);
  }

  #create-page::-webkit-scrollbar-thumb {
    background: rgb(147, 51, 234);
  }

  #create-page::-webkit-scrollbar-thumb:hover {
    background: rgb(126, 34, 206);
  }
</style>
