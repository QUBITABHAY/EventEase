---
import { featuredEvents } from "../../dummyData.js";
---

<section class="py-10 px-5 text-white bg-transparent">
  <div class="hero-events">
    <div class="text-center mb-6">
      <h2 class="text-3xl font-extrabold tracking-wide mb-2 md:text-2xl">Featured Events</h2>
      <p class="text-base text-gray-300 md:text-[15px]">
        Discover exciting tech events happening near you
      </p>
    </div>

    <div class="relative max-w-[clamp(220px,60vw,520px)] mx-auto">
      <div class="overflow-hidden relative h-[370px] rounded-2xl md:h-[380px]">
        <div class="flex h-full transition-transform duration-500 ease-in-out" id="carousel-container">
          {
            featuredEvents.map((event, index) => (
              <div class="flex-none w-full h-full flex flex-col bg-[#111928]/55 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md backdrop-saturate-150 shadow-[0_10px_30px_rgba(0,0,0,0.35)] transition-all duration-300 hover:-translate-y-1.5 hover:shadow-[0_18px_40px_rgba(0,0,0,0.45)]" data-index={index}>
                <div
                  class="relative h-[54%] flex items-center justify-center text-white font-bold uppercase tracking-wider"
                  style={`background: ${event.gradient}`}
                >
                  <div class="absolute top-3.5 left-3.5 bg-black/45 px-3 py-1.5 rounded-full text-xs border border-white/20 backdrop-blur-sm">{event.category}</div>
                </div>
                <div class="flex-1 p-6 text-center flex flex-col items-center md:p-[18px]">
                  <h3 class="text-[22px] font-extrabold mb-2.5 md:text-xl">{event.title}</h3>
                  <p class="text-[15px] text-gray-300 mb-4 line-clamp-3 md:text-sm">{event.description}</p>
                  <a href="#events" class="mt-auto inline-flex items-center gap-1.5 text-emerald-300 no-underline font-bold tracking-wide border border-emerald-300/35 px-3.5 py-2 rounded-lg transition-all duration-250 hover:bg-emerald-300/10 hover:text-emerald-200 hover:-translate-y-0.5">
                    Learn More
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path d="M5 12h14M12 5l7 7-7 7" />
                    </svg>
                  </a>
                </div>
              </div>
            ))
          }
        </div>
      </div>

      <div class="flex justify-center gap-2.5 mt-4" id="indicators">
        {
          featuredEvents.map((_, index) => (
            <button
              class={`w-[26px] h-2 rounded-full bg-white/30 border-none cursor-pointer transition-all duration-300 hover:bg-white/50 p-0 indicator ${index === 0 ? "bg-emerald-300 w-[38px]" : ""}`}
              data-index={index}
              aria-label={`Go to event ${index + 1}`}
            />
          ))
        }
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const carousel = document.getElementById("carousel-container");
    const indicators = document.querySelectorAll(".indicator");

    if (!carousel) return;

    let currentIndex = 0;
    const totalCards = indicators.length;

    function updateCarousel() {
      if (!carousel) return;
      const offset = -currentIndex * 100;
      carousel.style.transform = `translateX(${offset}%)`;

      indicators.forEach((indicator, index) => {
        if (index === currentIndex) {
          indicator.classList.remove("bg-white/30");
          indicator.classList.add("bg-emerald-300", "w-[38px]");
        } else {
          indicator.classList.add("bg-white/30");
          indicator.classList.remove("bg-emerald-300", "w-[38px]");
        }
      });
    }

    function goToSlide(index) {
      currentIndex = Math.max(0, Math.min(index, totalCards - 1));
      updateCarousel();
    }

    indicators.forEach((indicator, index) => {
      indicator.addEventListener("click", () => {
        goToSlide(index);
      });
    });

    setInterval(() => {
      if (currentIndex < totalCards - 1) {
        goToSlide(currentIndex + 1);
      } else {
        goToSlide(0);
      }
    }, 5000);

    updateCarousel();
  });
</script>

