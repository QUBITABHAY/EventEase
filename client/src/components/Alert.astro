---
interface Props {
    type?: "info" | "success" | "warning" | "error";
    message: string;
    dismissible?: boolean;
}

const { type = "info", message, dismissible = true } = Astro.props;

const icons = {
    info: "i",
    success: "✓",
    warning: "!",
    error: "✗",
};

const alertClass = {
    info: "alert-info",
    success: "alert-success",
    warning: "alert-warning",
    error: "alert-error",
}[type];
---

<div
    class={`alert ${alertClass} flex items-center gap-4 rounded-none mb-4 relative`}
    role="alert"
>
    <span class="text-2xl shrink-0">{icons[type]}</span>
    <span class="flex-1 font-medium">{message}</span>
    {
        dismissible && (
            <button
                class="btn btn-sm btn-ghost btn-circle absolute right-2 top-2"
                aria-label="Close alert"
            >
                ✕
            </button>
        )
    }
</div>

<script>
    document.querySelectorAll(".alert button").forEach((button) => {
        button.addEventListener("click", () => {
            const alert = button.closest(".alert");
            alert?.remove();
        });
    });
</script>
